{#
    # Brands Carousel
    # elements/snippets/brands-carousel.html
    # Carrossel de marcas customizado - itens configurados no painel
#} 
{% if settings.brands_carousel_active == '1' %}
    {% set carousel_items = [] %}
    
    {% for i in 1..12 %}
        {% set item_name = attribute(settings, 'brand_carousel_item_' ~ i ~ '_name') %}
        {% set item_logo = attribute(settings, 'brand_carousel_item_' ~ i ~ '_logo') %}
        {% set item_link = attribute(settings, 'brand_carousel_item_' ~ i ~ '_link') %}
        
        {% if item_name and item_name != '' and item_logo and item_logo != '' %}
            {% set logo_url = item_logo %}
            {% if logo_url and not (logo_url starts with 'http://' or logo_url starts with 'https://') %}
                {% set logo_url = asset(logo_url) %}
            {% endif %}
            
            {% set final_link = item_link ? item_link : '' %}
            
            {% set carousel_items = carousel_items|merge([{
                'name': item_name,
                'logo': logo_url,
                'link': final_link
            }]) %}
        {% endif %}
    {% endfor %}

    {% if carousel_items | length > 0 %}
        <section class="brands-carousel-section">
            <div class="brands-carousel-wrapper">
                <h2 class="brands-carousel-title">Nossas Marcas</h2>
                <div class="brands-carousel-container">
                    <div class="brands-carousel-track">
                        {% for item in carousel_items %}
                            <div class="brands-carousel-item">
                                {% if item.link and item.link != '' %}
                                    <a href="{{ item.link }}" class="brands-carousel-link" title="{{ item.name }}">
                                        <img src="{{ item.logo }}" alt="{{ item.name }}" class="brands-carousel-logo" loading="lazy">
                                    </a>
                                {% else %}
                                    <div class="brands-carousel-link" title="{{ item.name }}">
                                        <img src="{{ item.logo }}" alt="{{ item.name }}" class="brands-carousel-logo" loading="lazy">
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                    {% if carousel_items | length > 6 %}
                        <button class="brands-carousel-nav brands-carousel-prev" aria-label="Anterior">
                            <span class="icon-arrow-left"></span>
                        </button>
                        <button class="brands-carousel-nav brands-carousel-next" aria-label="PrÃ³ximo">
                            <span class="icon-arrow-right"></span>
                        </button>
                    {% endif %}
                </div>
            </div>
        </section>
    {% endif %}
{% endif %}

